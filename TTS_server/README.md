## Introduction

`TTS_server.rb` is a simple Ruby script to allow Station Manager (or conceievably other applications) – particularly dockerized ones – to make requests for audio files generated by Text-To-Speech from provided text. TTS_server takes requests by HTTP endpoint, so that docker containers can reliably make the request out to the host, and it provides a response by a path to the output file which the requesting client must have local access to.

TTS_server was created the way it was to allow use of MacOS's excellent commandline-available voice synthesis, which poses two problems:

- MacOS's voice synthesis itself cannot be dockerized
- Directly calling out to a MacOS host from a docker container running there is not possible using named pipes or UNIX domain sockets, due to how docker containers are virtualized on Mac

## Usage

Expects JSON messages with the following structure:
  {
    "tts_type": "macos",
    "voice": "Daniel (Enhanced)",
    "text": "Hello, my name is Daniel... Enhanced."
  }

The values are fed to a supported TTS tool, and a complete path to the resulting file returned.

Use environment variables to set:
  PORT (defaults to 3000) for the port the server will listen for requests
  ENDPOINT (defaults to "/say") for the HTTP path for the endpoint for requests
  OUTPUT_PATH (defaults to "tmp/") for the resulting audio file